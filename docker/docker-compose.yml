version: "3.9"

services:
  synology-toolchain:
    build:
      context: ..
      dockerfile: docker/Dockerfile
      args:
        PKGSCRIPTS_VERSION: "DSM7.2"
    container_name: synology-toolchain
    privileged: true
    environment:
      DSM_VERSION: "7.2"
      DSM_PLATFORM: "apollolake"
      TOOLKIT_ROOT: "/toolkit"
      WORKSPACE: "/workspace"
      TAR_OPTIONS: "--no-same-owner --no-same-permissions"
      SKIP_ENVDEPLOY: "true"
    volumes:
      - ../synology:/workspace/synology:rw
      - toolkit-data:/toolkit:rw
    tty: true
    stdin_open: true

volumes:
  toolkit-data:
    driver: local
